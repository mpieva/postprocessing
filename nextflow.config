/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  mpieva/reluctant Nextflow config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  Default config options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

manifest {
    name             = 'mpieva/postprocessing'
    author           = 'Merlin Szymanski'
    homePage         = 'https://vcs.eva.mpg.de/merlin_szymanski/reluctant'
    description      = 'Basic Processing of Shotgun-Sequenced Ancient Hominin Material'
    nextflowVersion  = '>=22.10'
    version          = 'v0.3-WIP'
}

//cleanup = true
nextflow.enable.moduleBinaries = true

singularity {
  autoMounts = true
  enabled    = true
  runOptions = "-B /tmp"
  cacheDir   = '/mnt/scratch/singularity'
}

params {

    //basic_settings
    help           = false // display help-text and exit

    //user input
    bam            = ""   // multiplexed BAM file, containing merged reads
    rg             = ""   // readgroup index information
    split          = ""   // alternative input: folder with already splitted files (BAM, FASTQ)

    //general
    paired = false // not yet possible, analyzeBAM_CPP has it...

    //for analyzeBAM
    bamfilter_filterflag      = 517             // vendor fail (512), unmapped (4), paired (1)
    bamfilter_minlength       = 35              // analyzeBAM 'min_len' flag. filter out reads shorter < 35bp
    bamfilter_maxlength       = 0               // not in CPP
    bamfilter_minqual         = 25              // filter out mapped reads with qualityscore < 25
    bamfilter_targetfile      = ""              // analyzeBAM 'targetfile' flag (only in CPP)
    bamfilter_chr_expression  = "^(X|Y|[0-9]+)" // keep only things mapping to Chromosome X,Y or autosomes. Not in CPP
    bamrmdup_cheap            = false
    bamrmdup_circular         = false

    compression_level         = 0    // bgzf compression level for intermediate files, 0..9

    // Defaults only, expecting to be overwritten
    max_memory = 128.GB
    max_cpus   = 16
    max_time   = 24.h
}

includeConfig "conf/process.config"
includeConfig "conf/settings.config"